{"title":"博客搭建小记","date":"2023-01-05T11:05:00.000Z","source":"_posts/博客搭建小记.md","raw":"---\ntitle: 博客搭建小记\ndate: 2023-01-05 19:05:00\ntags: [技术,Hexo]\n---\n## 前言\n\n回想起当初技术力不足时搭建博客的尝试，相比每次手动修改页面 Html 内容和相应的超链接，这次采用 Hexo 框架并采用 GitHub Action 自动构建的确是极大的进步。在搭建过程中大大小小的“坑”和解决方案，在此罗列。\n\n## 搭建过程\n\n### 准备\n\n在详细比较了 Hexo,Hugo,Jekyll 后，为了追求性能和易用性的平衡，选择了 Hexo 作为最终的方案。不仅是性能高于 Jekyll 的原因，更是因为本地已经具有了 Node.JS 的环境。在考虑之后，放弃了本地上传文件，决定使用 GitHub Action 自动构建。并选择 Anatolo 作为主题。\n\n### 本地配置\n\nHexo 本体的配置相对简单，不多赘述。但由于 Anatolo 和其上游主题的缘故，在采用 /blog/ 的子路径搭建博客时，生成的页面存在许多链接错误，需要修改配置文件。\n\n`logo_dir: /images/logo@2x.webp`\n\n`rss: /atom.xml`\n\n以上是无需添加 /blog/ 前缀的配置内容，诸如 favicon 等配置均需添加 /blog/ 前缀。\n\n此外，主题默认使用 zh-cn 作为语言代码，并非 zh-Hans 语言代码，需要注意。\n\n### GitHub Action 部署\n\n由于 GitHub 的环境更新，官方脚本将会提示警告，修正版本如下。\n\n```yml\npages:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n        with:\n          token: ${{ secrets.GITHUB_TOKEN }}\n          # If your repository depends on submodule, please see: https://github.com/actions/checkout\n          submodules: recursive\n      - name: Use Node.js 18.x\n        uses: actions/setup-node@v3\n        with:\n          node-version: '18'\n      - name: Cache NPM dependencies\n        uses: actions/cache@v3\n        with:\n          path: node_modules\n          key: ${{ runner.OS }}-npm-cache\n          restore-keys: |\n            ${{ runner.OS }}-npm-cache\n      - name: Install Dependencies\n        run: npm install\n      - name: Build\n        run: npm run build\n      - name: Deploy\n        uses: peaceiris/actions-gh-pages@v3\n        with:\n          github_token: ${{ secrets.GITHUB_TOKEN }}\n          publish_dir: ./public\n```\n\n此外，还需注意修改主题目录的 .gitignore 并且删除对 _config.yml 的忽略，或者使用代替配置文件的方法，否则上传到 GitHub 后自动构建无法正常进行。\n\n### 评论插件\n\n主题内置 GitTalk 的支持，但由于一些原因，此插件在部分地区无法正常使用，暂无解决方案。\n\n## 后记\n\n经过上述步骤并结合官方文档，一切已经可以正常运行，后续其它插件的配置均有完备的说明，故不再叙述。期望以上的“坑”可以被你所避开，感谢你的阅读。\n","slug":"博客搭建小记","published":true,"updated":"2024-04-19T14:55:42.477Z","_id":"clv6slzmo0005nvp8cq774de9","comments":true,"layout":"post","photos":[],"html":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>回想起当初技术力不足时搭建博客的尝试，相比每次手动修改页面 Html 内容和相应的超链接，这次采用 Hexo 框架并采用 GitHub Action 自动构建的确是极大的进步。在搭建过程中大大小小的“坑”和解决方案，在此罗列。</p>\n<h2 id=\"搭建过程\"><a href=\"#搭建过程\" class=\"headerlink\" title=\"搭建过程\"></a>搭建过程</h2><h3 id=\"准备\"><a href=\"#准备\" class=\"headerlink\" title=\"准备\"></a>准备</h3><p>在详细比较了 Hexo,Hugo,Jekyll 后，为了追求性能和易用性的平衡，选择了 Hexo 作为最终的方案。不仅是性能高于 Jekyll 的原因，更是因为本地已经具有了 Node.JS 的环境。在考虑之后，放弃了本地上传文件，决定使用 GitHub Action 自动构建。并选择 Anatolo 作为主题。</p>\n<h3 id=\"本地配置\"><a href=\"#本地配置\" class=\"headerlink\" title=\"本地配置\"></a>本地配置</h3><p>Hexo 本体的配置相对简单，不多赘述。但由于 Anatolo 和其上游主题的缘故，在采用 &#x2F;blog&#x2F; 的子路径搭建博客时，生成的页面存在许多链接错误，需要修改配置文件。</p>\n<p><code>logo_dir: /images/logo@2x.webp</code></p>\n<p><code>rss: /atom.xml</code></p>\n<p>以上是无需添加 &#x2F;blog&#x2F; 前缀的配置内容，诸如 favicon 等配置均需添加 &#x2F;blog&#x2F; 前缀。</p>\n<p>此外，主题默认使用 zh-cn 作为语言代码，并非 zh-Hans 语言代码，需要注意。</p>\n<h3 id=\"GitHub-Action-部署\"><a href=\"#GitHub-Action-部署\" class=\"headerlink\" title=\"GitHub Action 部署\"></a>GitHub Action 部署</h3><p>由于 GitHub 的环境更新，官方脚本将会提示警告，修正版本如下。</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">pages:</span></span><br><span class=\"line\">    <span class=\"attr\">runs-on:</span> <span class=\"string\">ubuntu-latest</span></span><br><span class=\"line\">    <span class=\"attr\">steps:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">uses:</span> <span class=\"string\">actions/checkout@v3</span></span><br><span class=\"line\">        <span class=\"attr\">with:</span></span><br><span class=\"line\">          <span class=\"attr\">token:</span> <span class=\"string\">$&#123;&#123;</span> <span class=\"string\">secrets.GITHUB_TOKEN</span> <span class=\"string\">&#125;&#125;</span></span><br><span class=\"line\">          <span class=\"comment\"># If your repository depends on submodule, please see: https://github.com/actions/checkout</span></span><br><span class=\"line\">          <span class=\"attr\">submodules:</span> <span class=\"string\">recursive</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Use</span> <span class=\"string\">Node.js</span> <span class=\"number\">18.</span><span class=\"string\">x</span></span><br><span class=\"line\">        <span class=\"attr\">uses:</span> <span class=\"string\">actions/setup-node@v3</span></span><br><span class=\"line\">        <span class=\"attr\">with:</span></span><br><span class=\"line\">          <span class=\"attr\">node-version:</span> <span class=\"string\">&#x27;18&#x27;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Cache</span> <span class=\"string\">NPM</span> <span class=\"string\">dependencies</span></span><br><span class=\"line\">        <span class=\"attr\">uses:</span> <span class=\"string\">actions/cache@v3</span></span><br><span class=\"line\">        <span class=\"attr\">with:</span></span><br><span class=\"line\">          <span class=\"attr\">path:</span> <span class=\"string\">node_modules</span></span><br><span class=\"line\">          <span class=\"attr\">key:</span> <span class=\"string\">$&#123;&#123;</span> <span class=\"string\">runner.OS</span> <span class=\"string\">&#125;&#125;-npm-cache</span></span><br><span class=\"line\">          <span class=\"attr\">restore-keys:</span> <span class=\"string\">|</span></span><br><span class=\"line\"><span class=\"string\">            $&#123;&#123; runner.OS &#125;&#125;-npm-cache</span></span><br><span class=\"line\"><span class=\"string\"></span>      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Install</span> <span class=\"string\">Dependencies</span></span><br><span class=\"line\">        <span class=\"attr\">run:</span> <span class=\"string\">npm</span> <span class=\"string\">install</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Build</span></span><br><span class=\"line\">        <span class=\"attr\">run:</span> <span class=\"string\">npm</span> <span class=\"string\">run</span> <span class=\"string\">build</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Deploy</span></span><br><span class=\"line\">        <span class=\"attr\">uses:</span> <span class=\"string\">peaceiris/actions-gh-pages@v3</span></span><br><span class=\"line\">        <span class=\"attr\">with:</span></span><br><span class=\"line\">          <span class=\"attr\">github_token:</span> <span class=\"string\">$&#123;&#123;</span> <span class=\"string\">secrets.GITHUB_TOKEN</span> <span class=\"string\">&#125;&#125;</span></span><br><span class=\"line\">          <span class=\"attr\">publish_dir:</span> <span class=\"string\">./public</span></span><br></pre></td></tr></table></figure>\n\n<p>此外，还需注意修改主题目录的 .gitignore 并且删除对 _config.yml 的忽略，或者使用代替配置文件的方法，否则上传到 GitHub 后自动构建无法正常进行。</p>\n<h3 id=\"评论插件\"><a href=\"#评论插件\" class=\"headerlink\" title=\"评论插件\"></a>评论插件</h3><p>主题内置 GitTalk 的支持，但由于一些原因，此插件在部分地区无法正常使用，暂无解决方案。</p>\n<h2 id=\"后记\"><a href=\"#后记\" class=\"headerlink\" title=\"后记\"></a>后记</h2><p>经过上述步骤并结合官方文档，一切已经可以正常运行，后续其它插件的配置均有完备的说明，故不再叙述。期望以上的“坑”可以被你所避开，感谢你的阅读。</p>\n","excerpt":"","more":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>回想起当初技术力不足时搭建博客的尝试，相比每次手动修改页面 Html 内容和相应的超链接，这次采用 Hexo 框架并采用 GitHub Action 自动构建的确是极大的进步。在搭建过程中大大小小的“坑”和解决方案，在此罗列。</p>\n<h2 id=\"搭建过程\"><a href=\"#搭建过程\" class=\"headerlink\" title=\"搭建过程\"></a>搭建过程</h2><h3 id=\"准备\"><a href=\"#准备\" class=\"headerlink\" title=\"准备\"></a>准备</h3><p>在详细比较了 Hexo,Hugo,Jekyll 后，为了追求性能和易用性的平衡，选择了 Hexo 作为最终的方案。不仅是性能高于 Jekyll 的原因，更是因为本地已经具有了 Node.JS 的环境。在考虑之后，放弃了本地上传文件，决定使用 GitHub Action 自动构建。并选择 Anatolo 作为主题。</p>\n<h3 id=\"本地配置\"><a href=\"#本地配置\" class=\"headerlink\" title=\"本地配置\"></a>本地配置</h3><p>Hexo 本体的配置相对简单，不多赘述。但由于 Anatolo 和其上游主题的缘故，在采用 &#x2F;blog&#x2F; 的子路径搭建博客时，生成的页面存在许多链接错误，需要修改配置文件。</p>\n<p><code>logo_dir: /images/logo@2x.webp</code></p>\n<p><code>rss: /atom.xml</code></p>\n<p>以上是无需添加 &#x2F;blog&#x2F; 前缀的配置内容，诸如 favicon 等配置均需添加 &#x2F;blog&#x2F; 前缀。</p>\n<p>此外，主题默认使用 zh-cn 作为语言代码，并非 zh-Hans 语言代码，需要注意。</p>\n<h3 id=\"GitHub-Action-部署\"><a href=\"#GitHub-Action-部署\" class=\"headerlink\" title=\"GitHub Action 部署\"></a>GitHub Action 部署</h3><p>由于 GitHub 的环境更新，官方脚本将会提示警告，修正版本如下。</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">pages:</span></span><br><span class=\"line\">    <span class=\"attr\">runs-on:</span> <span class=\"string\">ubuntu-latest</span></span><br><span class=\"line\">    <span class=\"attr\">steps:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">uses:</span> <span class=\"string\">actions/checkout@v3</span></span><br><span class=\"line\">        <span class=\"attr\">with:</span></span><br><span class=\"line\">          <span class=\"attr\">token:</span> <span class=\"string\">$&#123;&#123;</span> <span class=\"string\">secrets.GITHUB_TOKEN</span> <span class=\"string\">&#125;&#125;</span></span><br><span class=\"line\">          <span class=\"comment\"># If your repository depends on submodule, please see: https://github.com/actions/checkout</span></span><br><span class=\"line\">          <span class=\"attr\">submodules:</span> <span class=\"string\">recursive</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Use</span> <span class=\"string\">Node.js</span> <span class=\"number\">18.</span><span class=\"string\">x</span></span><br><span class=\"line\">        <span class=\"attr\">uses:</span> <span class=\"string\">actions/setup-node@v3</span></span><br><span class=\"line\">        <span class=\"attr\">with:</span></span><br><span class=\"line\">          <span class=\"attr\">node-version:</span> <span class=\"string\">&#x27;18&#x27;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Cache</span> <span class=\"string\">NPM</span> <span class=\"string\">dependencies</span></span><br><span class=\"line\">        <span class=\"attr\">uses:</span> <span class=\"string\">actions/cache@v3</span></span><br><span class=\"line\">        <span class=\"attr\">with:</span></span><br><span class=\"line\">          <span class=\"attr\">path:</span> <span class=\"string\">node_modules</span></span><br><span class=\"line\">          <span class=\"attr\">key:</span> <span class=\"string\">$&#123;&#123;</span> <span class=\"string\">runner.OS</span> <span class=\"string\">&#125;&#125;-npm-cache</span></span><br><span class=\"line\">          <span class=\"attr\">restore-keys:</span> <span class=\"string\">|</span></span><br><span class=\"line\"><span class=\"string\">            $&#123;&#123; runner.OS &#125;&#125;-npm-cache</span></span><br><span class=\"line\"><span class=\"string\"></span>      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Install</span> <span class=\"string\">Dependencies</span></span><br><span class=\"line\">        <span class=\"attr\">run:</span> <span class=\"string\">npm</span> <span class=\"string\">install</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Build</span></span><br><span class=\"line\">        <span class=\"attr\">run:</span> <span class=\"string\">npm</span> <span class=\"string\">run</span> <span class=\"string\">build</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Deploy</span></span><br><span class=\"line\">        <span class=\"attr\">uses:</span> <span class=\"string\">peaceiris/actions-gh-pages@v3</span></span><br><span class=\"line\">        <span class=\"attr\">with:</span></span><br><span class=\"line\">          <span class=\"attr\">github_token:</span> <span class=\"string\">$&#123;&#123;</span> <span class=\"string\">secrets.GITHUB_TOKEN</span> <span class=\"string\">&#125;&#125;</span></span><br><span class=\"line\">          <span class=\"attr\">publish_dir:</span> <span class=\"string\">./public</span></span><br></pre></td></tr></table></figure>\n\n<p>此外，还需注意修改主题目录的 .gitignore 并且删除对 _config.yml 的忽略，或者使用代替配置文件的方法，否则上传到 GitHub 后自动构建无法正常进行。</p>\n<h3 id=\"评论插件\"><a href=\"#评论插件\" class=\"headerlink\" title=\"评论插件\"></a>评论插件</h3><p>主题内置 GitTalk 的支持，但由于一些原因，此插件在部分地区无法正常使用，暂无解决方案。</p>\n<h2 id=\"后记\"><a href=\"#后记\" class=\"headerlink\" title=\"后记\"></a>后记</h2><p>经过上述步骤并结合官方文档，一切已经可以正常运行，后续其它插件的配置均有完备的说明，故不再叙述。期望以上的“坑”可以被你所避开，感谢你的阅读。</p>\n","path":"2023/01/05/博客搭建小记/","permalink":"https://mybluehorizon.github.io/blog/2023/01/05/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%B0%8F%E8%AE%B0/","tags":[{"name":"技术","_id":"clv6slzmr0009nvp84vd5djon","slug":"技术","path":"tags/技术/","permalink":"https://mybluehorizon.github.io/blog/tags/%E6%8A%80%E6%9C%AF/","length":3},{"name":"Hexo","_id":"clv6slzmw000pnvp82cfobuw5","slug":"Hexo","path":"tags/Hexo/","permalink":"https://mybluehorizon.github.io/blog/tags/Hexo/","length":1}],"categories":[],"prev":{"title":"Minecraft 1.20 互通服务器搭建记录","date":"2023-06-13T12:27:10.000Z","slug":"Minecraft-1-20-互通服务器搭建记录","published":true,"updated":"2024-04-19T14:55:42.477Z","_id":"clv6slzmj0003nvp82ubk2b0n","layout":"post","photos":[],"excerpt":"","path":"2023/06/13/Minecraft-1-20-互通服务器搭建记录/","permalink":"https://mybluehorizon.github.io/blog/2023/06/13/Minecraft-1-20-%E4%BA%92%E9%80%9A%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/","__post":true},"next":{"title":"旅程的开始","date":"2022-12-28T17:30:00.000Z","slug":"旅程的开始","published":true,"updated":"2024-04-19T14:55:42.477Z","_id":"clv6slzmq0008nvp8atvk6csi","layout":"post","photos":[],"excerpt":"","path":"2022/12/28/旅程的开始/","permalink":"https://mybluehorizon.github.io/blog/2022/12/28/%E6%97%85%E7%A8%8B%E7%9A%84%E5%BC%80%E5%A7%8B/","__post":true},"__post":true}
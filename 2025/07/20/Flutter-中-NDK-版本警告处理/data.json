{"title":"Flutter 中 Android NDK 版本警告处理","date":"2025-07-20T09:55:27.000Z","source":"_posts/Flutter-中-NDK-版本警告处理.md","raw":"---\ntitle: Flutter 中 Android NDK 版本警告处理\ndate: 2025-07-20 17:55:27\ntags: [技术,Flutter]\n---\n## 问题\n\nFlutter 中所指定的默认版本较为老旧，每当插件引入了较新的 Android NDK 版本进行构建时会产生如下警告：\n\n```bash\nOne or more plugins require a higher Android NDK version.\nFix this issue by adding the following to .../android/app/build.gradle.kts:\nandroid {\n  ndkVersion \"xx.x.xxxxxxx\"\n  ...\n}\n```\n\n通常，Android NDK 是向下兼容的，只需安装最新版本即可。若根据上述提示修改 `build.gradle.kts` 为具体版本号，虽可消除警告，但不能从根本上解决问题。既然此次引用了 Flutter SDK 的变量，若要从根本上解决，则应当对 Flutter SDK 的文件进行修改。\n\n## 解决\n\n在 Flutter 中，使用默认的应用构建时所使用的Android NDK 版本取决于 Flutter SDK 所指定的 Android NDK 版本，在最新的 Flutter SDK 版本中（`3.32.x`），这一变量值来自于 Flutter SDK安装位置下的 `.\\packages\\flutter_tools\\gradle\\src\\main\\kotlin\\FlutterExtension.kt` 的如下字段：\n\n```kotlin\nopen class FlutterExtension {\n    /**\n     * Sets the ndkVersion used by default in Flutter app projects.\n     * Chosen as default version of the AGP version below as found in\n     * https://developer.android.com/studio/projects/install-ndk#default-ndk-per-agp.\n     */\n    val ndkVersion: String = \"28.2.13676358\"\n}\n```\n\n由于 Android NDK 是向下兼容的，我们只需将其修改为设备上所安装的最新 Android NDK 版本（或从上述链接中选择版本，构建时会自动下载安装）即可，这也符合最佳实践的精神。  \n\n此外，`compileSdkVersion`、`minSdkVersion`、`targetSdkVersion` 等变量也存储在这一文件内。\n\n## 后记\n\n根据 Flutter 仓库中的 [Issue](https://github.com/flutter/flutter/issues/139427)，针对这一问题已有人提出改进，但是否未来能够被采纳则不得而知。  \n\n此外，针对于旧版 Flutter SDK，则应当修改 `./packages/flutter_tools/gradle/src/main/groovy/flutter.groovy` 文件。虽这一文件在新版已经被移除，但检索时发现的大量页面与 AIGC 均提到了这一失效文件，并未进行更新。\n","slug":"Flutter-中-NDK-版本警告处理","published":true,"updated":"2025-08-02T11:19:50.798Z","_id":"cmdu5uvrf0004vk7z062f6cm7","comments":true,"layout":"post","photos":[],"html":"<h2 id=\"问题\"><a href=\"#问题\" class=\"headerlink\" title=\"问题\"></a>问题</h2><p>Flutter 中所指定的默认版本较为老旧，每当插件引入了较新的 Android NDK 版本进行构建时会产生如下警告：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">One or more plugins require a higher Android NDK version.</span><br><span class=\"line\">Fix this issue by adding the following to .../android/app/build.gradle.kts:</span><br><span class=\"line\">android &#123;</span><br><span class=\"line\">  ndkVersion <span class=\"string\">&quot;xx.x.xxxxxxx&quot;</span></span><br><span class=\"line\">  ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>通常，Android NDK 是向下兼容的，只需安装最新版本即可。若根据上述提示修改 <code>build.gradle.kts</code> 为具体版本号，虽可消除警告，但不能从根本上解决问题。既然此次引用了 Flutter SDK 的变量，若要从根本上解决，则应当对 Flutter SDK 的文件进行修改。</p>\n<h2 id=\"解决\"><a href=\"#解决\" class=\"headerlink\" title=\"解决\"></a>解决</h2><p>在 Flutter 中，使用默认的应用构建时所使用的Android NDK 版本取决于 Flutter SDK 所指定的 Android NDK 版本，在最新的 Flutter SDK 版本中（<code>3.32.x</code>），这一变量值来自于 Flutter SDK安装位置下的 <code>.\\packages\\flutter_tools\\gradle\\src\\main\\kotlin\\FlutterExtension.kt</code> 的如下字段：</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">open</span> <span class=\"keyword\">class</span> <span class=\"title class_\">FlutterExtension</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Sets the ndkVersion used by default in Flutter app projects.</span></span><br><span class=\"line\"><span class=\"comment\">     * Chosen as default version of the AGP version below as found in</span></span><br><span class=\"line\"><span class=\"comment\">     * https://developer.android.com/studio/projects/install-ndk#default-ndk-per-agp.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">val</span> ndkVersion: String = <span class=\"string\">&quot;28.2.13676358&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>由于 Android NDK 是向下兼容的，我们只需将其修改为设备上所安装的最新 Android NDK 版本（或从上述链接中选择版本，构建时会自动下载安装）即可，这也符合最佳实践的精神。  </p>\n<p>此外，<code>compileSdkVersion</code>、<code>minSdkVersion</code>、<code>targetSdkVersion</code> 等变量也存储在这一文件内。</p>\n<h2 id=\"后记\"><a href=\"#后记\" class=\"headerlink\" title=\"后记\"></a>后记</h2><p>根据 Flutter 仓库中的 <a href=\"https://github.com/flutter/flutter/issues/139427\">Issue</a>，针对这一问题已有人提出改进，但是否未来能够被采纳则不得而知。  </p>\n<p>此外，针对于旧版 Flutter SDK，则应当修改 <code>./packages/flutter_tools/gradle/src/main/groovy/flutter.groovy</code> 文件。虽这一文件在新版已经被移除，但检索时发现的大量页面与 AIGC 均提到了这一失效文件，并未进行更新。</p>\n","excerpt":"","more":"<h2 id=\"问题\"><a href=\"#问题\" class=\"headerlink\" title=\"问题\"></a>问题</h2><p>Flutter 中所指定的默认版本较为老旧，每当插件引入了较新的 Android NDK 版本进行构建时会产生如下警告：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">One or more plugins require a higher Android NDK version.</span><br><span class=\"line\">Fix this issue by adding the following to .../android/app/build.gradle.kts:</span><br><span class=\"line\">android &#123;</span><br><span class=\"line\">  ndkVersion <span class=\"string\">&quot;xx.x.xxxxxxx&quot;</span></span><br><span class=\"line\">  ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>通常，Android NDK 是向下兼容的，只需安装最新版本即可。若根据上述提示修改 <code>build.gradle.kts</code> 为具体版本号，虽可消除警告，但不能从根本上解决问题。既然此次引用了 Flutter SDK 的变量，若要从根本上解决，则应当对 Flutter SDK 的文件进行修改。</p>\n<h2 id=\"解决\"><a href=\"#解决\" class=\"headerlink\" title=\"解决\"></a>解决</h2><p>在 Flutter 中，使用默认的应用构建时所使用的Android NDK 版本取决于 Flutter SDK 所指定的 Android NDK 版本，在最新的 Flutter SDK 版本中（<code>3.32.x</code>），这一变量值来自于 Flutter SDK安装位置下的 <code>.\\packages\\flutter_tools\\gradle\\src\\main\\kotlin\\FlutterExtension.kt</code> 的如下字段：</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">open</span> <span class=\"keyword\">class</span> <span class=\"title class_\">FlutterExtension</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Sets the ndkVersion used by default in Flutter app projects.</span></span><br><span class=\"line\"><span class=\"comment\">     * Chosen as default version of the AGP version below as found in</span></span><br><span class=\"line\"><span class=\"comment\">     * https://developer.android.com/studio/projects/install-ndk#default-ndk-per-agp.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">val</span> ndkVersion: String = <span class=\"string\">&quot;28.2.13676358&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>由于 Android NDK 是向下兼容的，我们只需将其修改为设备上所安装的最新 Android NDK 版本（或从上述链接中选择版本，构建时会自动下载安装）即可，这也符合最佳实践的精神。  </p>\n<p>此外，<code>compileSdkVersion</code>、<code>minSdkVersion</code>、<code>targetSdkVersion</code> 等变量也存储在这一文件内。</p>\n<h2 id=\"后记\"><a href=\"#后记\" class=\"headerlink\" title=\"后记\"></a>后记</h2><p>根据 Flutter 仓库中的 <a href=\"https://github.com/flutter/flutter/issues/139427\">Issue</a>，针对这一问题已有人提出改进，但是否未来能够被采纳则不得而知。  </p>\n<p>此外，针对于旧版 Flutter SDK，则应当修改 <code>./packages/flutter_tools/gradle/src/main/groovy/flutter.groovy</code> 文件。虽这一文件在新版已经被移除，但检索时发现的大量页面与 AIGC 均提到了这一失效文件，并未进行更新。</p>\n","path":"2025/07/20/Flutter-中-NDK-版本警告处理/","permalink":"https://mybluehorizon.github.io/blog/2025/07/20/Flutter-%E4%B8%AD-NDK-%E7%89%88%E6%9C%AC%E8%AD%A6%E5%91%8A%E5%A4%84%E7%90%86/","tags":[{"name":"技术","_id":"cmdu5uvrl000evk7z41qh1pfo","slug":"技术","path":"tags/技术/","permalink":"https://mybluehorizon.github.io/blog/tags/%E6%8A%80%E6%9C%AF/","length":4},{"name":"Flutter","_id":"cmdu5uvrm000gvk7zfsa39g13","slug":"Flutter","path":"tags/Flutter/","permalink":"https://mybluehorizon.github.io/blog/tags/Flutter/","length":1}],"categories":[],"prev":null,"next":{"title":"2024 年终总结","date":"2025-01-10T04:00:00.000Z","slug":"2024-年终总结 ","published":true,"updated":"2025-08-02T11:19:50.798Z","_id":"cmdu5uvre0003vk7za3a4eyrf","layout":"post","photos":[],"excerpt":"","path":"2025/01/10/2024-年终总结 /","permalink":"https://mybluehorizon.github.io/blog/2025/01/10/2024-%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93%20/","__post":true},"__post":true}